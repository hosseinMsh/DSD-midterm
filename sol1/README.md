# ฺฏุฒุงุฑุด ูพุฑูฺู: ูพุงุฏูโุณุงุฒ ุถุฑุจโฺฉููุฏู ฑฒธ ุจุช ุจุง ุฑูุด Karatsuba ุฏุฑ Verilog (ูุฑูุฏ ธ ุจุช)

## ๐ฏ ูุฏู ูพุฑูฺู

ุฏุฑ ุงู ูพุฑูฺูุ ูุฏู ุทุฑุงุญ ฺฉ ูุฏุงุฑ ุถุฑุจโฺฉููุฏู ุจุฑุง ุงุนุฏุงุฏ ุตุญุญ ุนูุงูุชโุฏุงุฑ ฑฒธ ุจุช ุจุง ุงุณุชูุงุฏู ุงุฒ **ุฑูุด Karatsuba** ุงุณุช. ุจุฑุง ูุงุญุฏูุง ถด ุจุช ุฏุงุฎู ุงุฒ ุฑูุด **Shift and Add** ุงุณุชูุงุฏู ุดุฏู ุงุณุช.

ุจู ุนูุช ูุญุฏูุฏุชโูุง ูุญุท Quartus (ูุซู ุชุนุฏุงุฏ ูุญุฏูุฏ ุงุฒ ููุงุจุน FPGA ู ุณุฎุช ููุงุด ููุงุฏุฑ ุจุฒุฑฺฏ ุฏุฑ ุงุจุฒุงุฑ ุดุจูโุณุงุฒ)ุ ูุฑูุฏโูุง ู ุฎุฑูุฌโูุง ุฏุฑ ุณุทุญ top ุจู **ธ ุจุช** ฺฉุงูุด ุงูุชูโุงูุฏุ ุงูุง ุฏุฑ ูุณุชูโ ุฏุงุฎู ูุฏุงุฑุ ุนููุงุช ุฑู ฑฒธ ุจุช ุงูุฌุงู ูโุดูุฏ.

---

## ๐งฑ ุณุงุฎุชุงุฑ ฺฉู ูุฏุงุฑ

### ูุงฺูู `top.v`

ูุงฺูู ุณุทุญ ุจุงูุง ูพุฑูฺู ุงุณุช ฺฉู ุฏุงุฑุง ูพูุฑุชโูุง ุฒุฑ ุงุณุช:

| ูพูุฑุช         | ููุน   | ุชูุถุญ                  |
| ------------ | ----- | ---------------------- |
| `a_in`       | 8 ุจุช | ุนุฏุฏ ุงูู ูุฑูุฏ (signed) |
| `b_in`       | 8 ุจุช | ุนุฏุฏ ุฏูู ูุฑูุฏ (signed) |
| `clk`        | 1 ุจุช | ุณฺฏูุงู ุณุงุนุช            |
| `rst_n`      | 1 ุจุช | ุฑุณุช ูุนุงู-ูพุงู        |
| `result_out` | 8 ุจุช | ธ ุจุช ูพุงู ุญุงุตู ุถุฑุจ   |

ุฏุฑ ุงู ูุงฺููุ ูุฑูุฏโูุง ธ ุจุช ุงุจุชุฏุง ุจู ฑฒธ ุจุช sign-extended ูโุดููุฏ ู ุณูพุณ ุจู ูุงฺูู Karatsuba ุงุฑุณุงู ูโฺฏุฑุฏูุฏ.

```verilog
a <= {{120{a_in[7]}}, a_in};
b <= {{120{b_in[7]}}, b_in};
```

### ูุงฺูู `karatsuba_128.v`

ุงู ูุงฺูู ุถุฑุจ ุฏู ุนุฏุฏ ฑฒธ ุจุช ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุฑูุด ุจุงุฒฺฏุดุช Karatsuba ุงูุฌุงู ูโุฏูุฏ. ุฏุฑ ุงุนูุงู ุจุงุฒฺฏุดุชุ ุถุฑุจ ถด ุจุช ุชูุณุท ูุงฺูู `shift_add_64.v` ุงูุฌุงู ูโุดูุฏ.

### ูุงฺูู `shift_add_64.v`

ูพุงุฏูโุณุงุฒ ุณุงุฏูโ ุถุฑุจ ถด ุจุช ุจุง ุงุณุชูุงุฏู ุงุฒ ุฑูุด `Shift and Add`ุ ฺฉู ุฏุฑ ูุฑ ุณฺฉู ฺฉูุงฺฉ ฺฉ ุงุฒ ุจุชโูุง ุถุฑุจ ุดููุฏู ุจุฑุฑุณ ู ุจู ุดุฑุท ูุนุงู ุจูุฏูุ ุดูุชโุดุฏู ุจู ุญุงุตู ุฌูุน ูโุดูุฏ.

### ุชุณุชโุจูฺ `tb_karatsuba.v`

ุชุณุชโุจูฺ ูุฑูุฏโูุง ูุฎุชูู ุฑุง ุจู ูุฏุงุฑ ูุงุฑุฏ ูโฺฉูุฏ ู ุฎุฑูุฌ ุฑุง ุจุง ููุฏุงุฑ ุตุญุญ ุจุฑุฑุณ ูโฺฉูุฏ. ุฏุฑ ุชุณุชโุจูฺ ุงุฒ ุนููฺฏุฑ `*` ุจุฑุง ูุญุงุณุจู ูพุงุณุฎ ูุฑุฌุน ุงุณุชูุงุฏู ุดุฏู ุงุณุช (ุฏุฑ Verilog ุจุฑุง ุดุจูโุณุงุฒ ูุฌุงุฒ ุงุณุช).

---

## ๐งช ุชุณุช ู ุดุจูโุณุงุฒ

ุฏุฑ ูุงู ุดุจูโุณุงุฒ (`.vwf`)ุ ุณฺฏูุงูโูุง ุฒุฑ ุจุฑุฑุณ ุดุฏูุฏ:

| `a_in` | `b_in` | `result_out`               |
| ------ | ------ | -------------------------- |
| 5      | -11    | -55                        |
| -2     | 32     | -64                        |
| 3      | 15     | 45                         |
| -8     | 12     | -96                        |
| 9      | 7      | 63                         |
| -7     | 1      | -7                         |
| 100    | 89     | 0 (overflow ุฎุงุฑุฌ ุงุฒ ธ ุจุช) |

> ุฏุฑ ุจุฑุฎ ููุงุฑุฏ ุจู ุนูุช ูุญุฏูุฏุช ธ ุจุช ุฎุฑูุฌุ overflow ุฑุฎ ูโุฏูุฏ ู ููุท ธ ุจุช ูพุงู ูุงุจู ูุดุงูุฏู ุงุณุช.

---

## โ๏ธ ูุญุฏูุฏุชโูุง

* **ุฎุฑูุฌ ธ ุจุช**: ููุท ธ ุจุช ูพุงู ูุชุฌู ููุงุด ุฏุงุฏู ูโุดูุฏ. ุจุฑุง ูุชุฌูโ ฺฉุงููุ ุจุงุฏ ุฎุฑูุฌ ุชุง 256 ุจุช ุชูุณุนู ุงุจุฏ.
* **ูุฑูุฏโูุง ธ ุจุช**: ุจู ุฏูู ูุญุฏูุฏุช ุงุจุฒุงุฑ ุดุจูโุณุงุฒ ู ุณุฎุชโุงูุฒุงุฑุ ูุฑูุฏโูุง ุจู ธ ุจุช ฺฉุงูุด ุงูุชูโุงูุฏ.
* **ุฑูุด ูพุงุฏูโุณุงุฒ**: ุจู ุฏูู ููููุน ุจูุฏู ุงุณุชูุงุฏู ุงุฒ ุนููฺฏุฑ `*` ุฏุฑ ุทุฑุงุญ ุงุตูุ ููุท ุฏุฑ ุชุณุชโุจูฺ ุงุณุชูุงุฏู ุดุฏู ุงุณุช.

---

## ๐ ุฑุงูููุง ุงุฌุฑุง

### ุฏุฑ Quartus:

1. ูพุฑูฺู ุฑุง ุจุงุฒ ฺฉูุฏ ู ูุงู `top.v` ุฑุง ุจู ุนููุงู top-level entity ุชูุธู ฺฉูุฏ.
2. ูุงู waveform (`.vwf`) ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ุณฺฏูุงูโูุง ุฑุง ุชูุธู ฺฉูุฏ.
3. ฺฏุฒูู "Run Simulation" ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.
4. ุฎุฑูุฌ `result_out` ุฑุง ุจุฑุฑุณ ฺฉูุฏ.

### ุฏุฑ ModelSim ุง Icarus Verilog:

ุงฺฏุฑ ุฎูุงุณุชุฏ ูุงูโูุง ุดุจูโุณุงุฒ CLI ุฏุงุดุชู ุจุงุดุฏุ ูโุชูุงูู ฺฉ `Makefile` ุง ุฏุณุชูุฑ `iverilog + vvp` ุจุฑุงุช ุจููุณู.

---

## ๐ ูุงูโูุง ูพุฑูฺู

* `top.v` โ ูุงฺูู ุณุทุญ ุจุงูุง ุจุง ูุฑูุฏโูุง ุณุงุฏู ุดุฏู ุจุฑุง ุดุจูโุณุงุฒ
* `karatsuba_128.v` โ ูพุงุฏูโุณุงุฒ Karatsuba ุจุฑุง ฑฒธ ุจุช
* `shift_add_64.v` โ ุถุฑุจโฺฉููุฏู ุณุงุฏู ุจุฑุง ูุงุญุฏูุง ถด ุจุช
* `tb_karatsuba.v` โ ุชุณุชโุจูฺ ุฌูุช ุชุณุช ุตุญุช ุนููฺฉุฑุฏ ูุฏุงุฑ
* `so1.vwf` โ ูุงู ููุฌ ุดุจูโุณุงุฒ ุฏุฑ Quartus
