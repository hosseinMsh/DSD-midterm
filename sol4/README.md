

## ๐ ุฑุงูููุง ูพุฑูฺู: ุชููุฏ ููุฌ ุฑููพ ุขูุงููฺฏ ุจุง PWM ุฑู FPGA



### ๐ง ุฎูุงุตู ูพุฑูฺู

ูุฏู ุงู ูพุฑูฺู ุชููุฏ ฺฉ **ููุฌ ุฑููพ ุฎุท ุจุง ูุฑฺฉุงูุณ ฑkHz** ุจู ุฑูุด ฺฉุงููุงู ุฏุฌุชุงู ุงุณุชุ ุจุฏูู ูุงุฒ ุจู DAC. ุจุง ุงุณุชูุงุฏู ุงุฒ **ูุฏููุงุณูู ูพููุง ูพุงูุณ (PWM)** ู ุนุจูุฑ ุฎุฑูุฌ ุขู ุงุฒ ฺฉ **ููุชุฑ RC ุณุงุฏู**ุ ุณฺฏูุงู ุขูุงููฺฏ ุจุง ูุฑู ุฑููพ (ูุซูุซ ฺฉโุทุฑูู) ุชููุฏ ูโุดูุฏ.

---

## ๐งฉ ููุทู ุทุฑุงุญ

### โ ูุฑุญูู ฑ: ุดูุงุฑูุฏู ุฑููพ

* ุดูุงุฑูุฏูโุง ฑฐ ุจุชุ ุงุฒ ฐ ุชุง ฑฐฒณ ูโุดูุงุฑุฏ ู ุฏูุจุงุฑู ุตูุฑ ูโุดูุฏ.
* ูุฑ ุชฺฉ ุดูุงุฑูุฏู ุจุงุฏ ุจู ฺฏูููโุง ุฒูุงูโุจูุฏ ุดูุฏ ฺฉู *ฺฉู ุฏูุฑูู ุดูุงุฑุด ฑms ุทูู ุจฺฉุดุฏ* (ุจุฑุง ุชููุฏ ููุฌ ฑkHz).

### โ ูุฑุญูู ฒ: ุชููุฏ PWM

* ุณฺฏูุงู PWM ุจุง ููุงุณู ููุฏุงุฑ ุดูุงุฑูุฏู ุฑููพ (`ramp_val`) ู ฺฉ ุดูุงุฑูุฏู PWM ุฏุงุฎู ุชููุฏ ูโุดูุฏ.
* ูุฑ ฺู `ramp_val` ุจุฒุฑฺฏโุชุฑ ุจุงุดุฏุ *ูพููุง ูพุงูุณ ุจุดุชุฑ* ุฎูุงูุฏ ุดุฏุ ุนู ุณุทุญ DC ุฎุฑูุฌ ุจุงูุงุชุฑ ูโุฑูุฏ.

### โ ูุฑุญูู ณ: ููุชุฑ ูพุงูโฺฏุฐุฑ

* ฺฉ ููุชุฑ ุณุงุฏู RC ุฎุฑูุฌ PWM ุฑุง ุจู ุณฺฏูุงู ุขูุงููฺฏ ุฑููพ ูุฑู ุชุจุฏู ูโฺฉูุฏ.
* ูุฑฺฉุงูุณ ูุทุน ููุชุฑ ุจู ฺฏูููโุง ุงูุชุฎุงุจ ูโุดูุฏ ฺฉู ุฑูพู ุจู ุญุฏุงูู ุจุฑุณุฏ ู ุดฺฉู ุฑููพ ุญูุธ ุดูุฏ.

---

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง

| ูุงู             | ุชูุถุญ                                            |
| ---------------- | ------------------------------------------------ |
| `ramp_pwm.v`     | ูุงฺูู ุงุตู ุดุงูู ุดูุงุฑูุฏู ุฑููพ ู ุชููุฏโฺฉููุฏู PWM    |
| `ramp_pwm_top.v` | ููุงู ุจุงูุง (Top-level wrapper) ุจุฑุง ุงุชุตุงู ุจู FPGA |
| `tb_ramp_pwm.v`  | ุชุณุชโุจูฺ ุดุจูโุณุงุฒ ุจุฑุง ModelSim ุง QuestaSim     |
| `README.md`      | ุฑุงูููุง ูพุฑูฺู ุจู ุฒุจุงู ูุงุฑุณ                      |
| `README_en.md`   | ูุณุฎู ุงูฺฏูุณ ุฑุงูููุง                              |

---

## โ๏ธ ูพุงุฑุงูุชุฑูุง ุทุฑุงุญ

```verilog
parameter CLK_HZ    = 50_000_000; // ูุฑฺฉุงูุณ ฺฉูุงฺฉ ูุฑูุฏ
parameter RAMP_FREQ = 1_000;      // ูุฑฺฉุงูุณ ููุฌ ุฑููพ (1kHz)
parameter PWM_BITS  = 10;         // ุชุนุฏุงุฏ ุจุช PWM
```

### ๐ธ ูุญุงุณุจุงุช ููู

* ุชุนุฏุงุฏ ฺฏุงูโูุง ุฑููพ: 2^10 = 1024
* ุฏูุฑู ุฒูุงู ูุฑ ฺฏุงู:

  $$
  T_{\text{step}} = \frac{1}{f_{\text{ramp}} \times 1024} \approx 976 \text{ ns}
  $$
* ุจูุงุจุฑุงู:

  $$
  \text{Divider} = \frac{50\,MHz}{1\,kHz \times 1024} \approx 48828
  $$
* ูุฑฺฉุงูุณ PWM:

  $$
  f_{\text{PWM}} = \frac{50\,MHz}{1024} \approx 48.8\,kHz
  $$

---

## ๐งช ุงุฌุฑุง ุดุจูโุณุงุฒ

### โถ๏ธ ูุฑุงุญู ุฏุฑ ModelSim

1. ูุงู `tb_ramp_pwm.v` ุฑุง ุจู ุนููุงู ุชููพโูููู ุงูุชุฎุงุจ ฺฉูุฏ.
2. ุฏุณุชูุฑุงุช:

```tcl
vsim work.tb_ramp_pwm
add wave *
run 5ms
```

### ๐ ูุดุงูุฏุงุช:

* `ramp_val` ุงุฒ ฐ ุชุง ฑฐฒณ ุฏุฑ ูุฑ ฑms
* `pwm_out` ููุฌ PWM ุจุง ูพููุง ูพุงูุณ ูุชุบุฑ
* ุจุฑุง ูุดุงูุฏู ุฑููพ ููุงุ ุฑู `pwm_out` ุฑุงุณุชโฺฉูฺฉ > **Add > Integrate** (ฺฉูพุงุฑฺูโุณุงุฒ)

---

## ๐ ูพุงุฏูโุณุงุฒ ุฏุฑ Quartus ู FPGA

### ๐งฉ ูุฑุงุญู:

1. ุงูุชุฎุงุจ ุชููพโูููู: `ramp_pwm_top`

2. ุชุนู ูพูโูุง ุฏุฑ Pin Planner:

   | ุณฺฏูุงู    | ูพู ูุซุงู (ุจุฑุฏ DE2) |
   | --------- | ------------------ |
   | `clk_50`  | `CLOCK_50`         |
   | `rst_n`   | `KEY[0]`           |
   | `pwm_out` | `GPIO[0]`          |

3. ุจุฑูุงููโุฑุฒ FPGA

4. ุงุชุตุงู ุฎุฑูุฌ ุจู ููุชุฑ RC โ ูุดุงูุฏู ุจุง ุงุณูุณฺฉููพ

---

## ๐ ุทุฑุงุญ ููุชุฑ RC ุฎุฑูุฌ

| R      | C     | f<sub>c</sub> ุชูุฑุจ |
| ------ | ----- | -------------------- |
| 3.3 kฮฉ | 10 nF | 4.8 kHz              |

* ุงฺฏุฑ ุฑูพู ุฒุงุฏ ุจูุฏ:
  ๐ C ุฑุง ุชุง 22nF ุง R ุฑุง ุชุง 10kฮฉ ุงูุฒุงุด ุฏูุฏ

---

## ๐ ูุดุงูุฏุงุช ุฑู ุจุฑุฏ ูุงูุน

| ฺฉุงูุงู | ุณฺฏูุงู      | ูุดุฎุตุงุช                               |
| ----- | ----------- | ------------------------------------ |
| CH1   | PWM         | 0โ3.3Vุ ูุฑฺฉุงูุณ โ 49kHz               |
| CH2   | ุฎุฑูุฌ ููุชุฑ | ููุฌ ุฑููพ ุตุงูุ ุงุฒ ฐ ุชุง ณ.ณ ููุช ุฏุฑ ฑ ms |

---

## ๐ ุชูุณุนูโูุง ูพุดููุงุฏ

* ุชููุฏ ููุฌ ูุซูุซ: ุดูุงุฑูุฏู up/down
* ุฏูุช ุจุดุชุฑ (ฑฒ ุจุช)
* ููุฌ ุฏูุฎูุงู ุจุง ROM LUT
* ุงุณุชูุงุฏู ุงุฒ sigma-delta modulation ุจุฑุง ฺฉุงูุด ุฑูพู ุจุดุชุฑ

---

## ๐ ูุฌูุฒ

ฺฉุฏ ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ MIT ุขุฒุงุฏ ุงุณุช. ุงุณุชูุงุฏู ุจุฑุง ุงูุฏุงู ุขููุฒุดุ ุชุญููุงุช ุง ุตูุนุช ูุฌุงุฒ ุจูุฏู ู ูุงุฒ ุจู ุฐฺฉุฑ ููุจุน ูุฏุงุฑุฏ โ ูู ุฎูุดุญุงู ูโุดูู ุงฺฏุฑ ูุงู ูพุฑูฺู ุง ููุณูุฏู ุฑุง ุฐฺฉุฑ ฺฉูุฏ.

---

## ๐ ูุณุฎู ุงูฺฏูุณ

ุจุฑุง ุฎูุงูุฏู ูุณุฎู ุงูฺฏูุณ ุงู ุฑุงูููุงุ [ุงูุฌุง ฺฉูฺฉ ฺฉูุฏ](README_en.md) ุง ูุงู `README_en.md` ุฑุง ุจุงุฒ ฺฉูุฏ.
